<app-navbar></app-navbar>

<p-toast position="bottom-center"></p-toast>

<div class="container-fliud container-height bg-lighter d-flex flex-column justify-content-center">
    <div class="container-sm d-flex flex-column justify-content-center">
        <p-card class="m-auto w-100 my-3" [style]="{'max-width': '60rem', 'margin': 'auto', 'border-radius': '10px'}">
            <div class="d-flex justify-content-around align-items-center">
                <div class="login-container p-fluid d-none d-md-block my-md-3 my-lg-5 ml-lg-5 px-md-3">
                    <img class="h-100 w-100" src="../../assets/img/login-image.png" alt="Emprende Store LogIn">
                </div>
                <div
                    class="login-container p-fluid d-flex flex-column justify-content-around my-md-3 my-lg-5 mr-lg-5 px-md-3 text-center">
                    <form [formGroup]="loginForm" (submit)="iniciarSesion()">
                        <h4 class="login-title">Inicio de sesión</h4>
                        <span class="p-input-filled p-input-icon-left p-float-label mt-5">
                            <i class="pi pi-envelope"></i>
                            <input pInputText
                                [ngClass]="(submitted && loginForm.get('email')?.invalid) || messageEmail? 'ng-dirty ng-invalid' : ''"
                                id="email" type="text" formControlName="email" name="email"
                                aria-describedby="email-help">
                            <label for="email">E-mail</label>
                        </span>
                        <small *ngIf="submitted && loginForm.get('email')?.errors?.['required']" id="email-help"
                            class="p-error">Ingrese su E-mail.</small>
                        <small *ngIf="submitted && loginForm.get('email')?.errors?.['email']" id="email-help"
                            class="p-error">El E-mail no es válido.</small>
                        <small *ngIf="messageEmail" id="email-help" class="p-error">{{messageEmail}}</small>
                        <span class="p-input-filled p-input-icon-left p-input-icon-right p-float-label mt-5">
                            <i class="pi pi-shield"></i>
                            <i class="c-pointer pi" [ngClass]="passMask ? 'pi-eye' : 'pi-eye-slash'"
                                (click)="passMask = !passMask"></i>
                            <input pInputText
                                [ngClass]="(submitted && loginForm.get('password')?.invalid) || messagePassword ? 'ng-dirty ng-invalid' : ''"
                                id="password" [attr.type]="passMask ? 'password' : 'text'" formControlName="password"
                                name="password" aria-describedby="password-help">
                            <label for="password">Contraseña</label>
                        </span>
                        <small *ngIf="submitted && loginForm.get('password')?.invalid" id="password-help"
                            class="p-error">Ingrese su contraseña.</small>
                        <small *ngIf="messagePassword" id="password-help"
                            class="p-error">{{messagePassword}}</small>
                        <div>
                            <button pButton pRipple type="submit" label="INICIAR SESIÓN" [icon]="waiting ? 'pi pi-spin pi-spinner': ''"
                                class="p-button login-button" [ngClass]="!waiting ? 'no-icon': ''"></button>
                            <a class="forgot-password" [routerLink]="'.'">Olvidé mi contraseña</a>
                        </div>
                    </form>
                </div>
            </div>
        </p-card>
    </div>
</div>

<app-footbar></app-footbar>